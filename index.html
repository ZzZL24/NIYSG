<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>破破破破破竹风</title>
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="stylesheet" href="game-styled.css">
    <!-- 资源预加载优化 -->
    <link rel="preload" href="script.js" as="script">
    <link rel="preload" href="game-styled.css" as="style">
    <!-- MathJax LaTeX渲染库 -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            chtml: {
                fontURL: './'
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
      <!-- MathJax 数学公式渲染库（本地引用） -->
      <script id="MathJax-script" async src="./mathjax.js"></script>
      <!-- Chart.js 图表库（本地引用） -->
      <script async src="./chart.min.js"></script>
      <!-- 加载优化脚本 -->
      <script>
        // 确保外部库加载完成后再执行主脚本
        window.addEventListener('load', function() {
          // 检查外部库是否加载完成
          if (typeof MathJax !== 'undefined' && typeof Chart !== 'undefined') {
            console.log('所有外部库加载完成');
          }
        });
      </script>
    <style>
        /* 移动端优化 - 不影响PC端 */
        @media (max-width: 768px) {
            /* 整体布局调整 */
            body {
                font-size: 14px;
                padding: 5px;
            }
            
            .container {
                padding: 5px;
                margin: 0;
            }
            
            /* 标签页导航调整 */
            .tab-nav {
                flex-direction: column;
                gap: 5px;
            }
            
            .tab-nav button {
                padding: 8px 12px;
                font-size: 12px;
                min-width: auto;
                flex: 1;
            }
            
            /* 表格容器调整 */
            .table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .table-container table {
                min-width: 600px;
                font-size: 12px;
            }
            
            .table-container table th,
            .table-container table td {
                padding: 4px 2px;
                height: 32px;
            }
            
            /* 输入框调整 */
            input[type="number"], 
            input[type="text"], 
            select {
                font-size: 12px;
                padding: 4px 6px;
                min-width: 50px;
            }
            
            /* 按钮调整 */
            .action-btn {
                padding: 6px 10px;
                font-size: 12px;
                margin: 2px;
            }
            
            /* 配置区域调整 */
            .config-section {
                flex-direction: column;
                gap: 10px;
            }
            
            .config-row {
                flex-direction: column;
                gap: 5px;
            }
            
            .config-item {
                width: 100%;
                margin-bottom: 5px;
            }
            
            /* 图表容器调整 */
            .chart-container {
                height: 300px;
                margin: 10px 0;
            }
            
            /* 词条毕业度表格调整 */
            .trait-graduation-table-container {
                overflow-x: auto;
            }
            
            .trait-graduation-table {
                min-width: 400px;
                font-size: 12px;
            }
            
            .trait-graduation-table th,
            .trait-graduation-table td {
                padding: 4px 6px;
                font-size: 12px;
            }
            
            /* 注意说明文本调整 */
            .trait-graduation-table-container > div:last-child {
                font-size: 11px;
                padding: 8px;
                margin-top: 10px;
            }
            
            /* 模式选择器调整 */
            .mode-selector {
                flex-direction: column;
                gap: 5px;
            }
            
            .mode-select {
                width: 100%;
                font-size: 12px;
                padding: 6px 8px;
            }
            
            /* 自定义模式配置调整 */
            .custom-mode-config {
                width: 100%;
            }
            
            .graduation-input {
                width: 100%;
                font-size: 12px;
            }
            
            /* 排轴表格调整 */
            #rotation-table {
                font-size: 11px;
            }
            
            #rotation-table th,
            #rotation-table td {
                padding: 2px 4px;
                height: 28px;
            }
            
            /* 技能选择下拉框调整 */
            #rotation-table select {
                font-size: 11px;
                padding: 2px 4px;
            }
            
            /* 数值输入框调整 */
            .table-times-input {
                width: 50px;
                font-size: 11px;
                padding: 2px 4px;
            }
            
            /* 图表图例调整 */
            .chart-legend {
                font-size: 10px;
                flex-wrap: wrap;
            }
            
            .chart-legend-item {
                margin: 2px 4px;
                padding: 2px 6px;
            }
        }
        
        /* 超小屏幕适配 */
        @media (max-width: 480px) {
            body {
                font-size: 12px;
                padding: 2px;
            }
            
            .container {
                padding: 2px;
            }
            
            .tab-nav button {
                padding: 6px 8px;
                font-size: 11px;
            }
            
            .table-container table {
                min-width: 500px;
                font-size: 10px;
            }
            
            .table-container table th,
            .table-container table td {
                padding: 2px 1px;
                height: 28px;
            }
            
            input[type="number"], 
            input[type="text"], 
            select {
                font-size: 10px;
                padding: 2px 4px;
                min-width: 40px;
            }
            
            .action-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .trait-graduation-table {
                min-width: 350px;
                font-size: 10px;
            }
            
            .trait-graduation-table th,
            .trait-graduation-table td {
                padding: 2px 4px;
                font-size: 10px;
            }
            
            #rotation-table {
                font-size: 9px;
            }
            
            #rotation-table th,
            #rotation-table td {
                padding: 1px 2px;
                height: 24px;
            }
            
            .table-times-input {
                width: 40px;
                font-size: 9px;
                padding: 1px 2px;
            }
        }
        
        /* 移动端触摸优化 */
        @media (max-width: 768px) {
            /* 触摸友好的按钮 */
            .action-btn, 
            .tab-nav button,
            button {
                min-height: 44px;
                min-width: 44px;
                touch-action: manipulation;
            }
            
            /* 防止iOS输入框缩放 */
            input[type="text"],
            input[type="number"],
            input[type="email"],
            input[type="password"],
            select,
            textarea {
                font-size: 16px !important;
                -webkit-appearance: none;
                border-radius: 6px;
            }
            
            /* 移动端安全区域适配 */
            body {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }
            
            /* 输入框触摸优化 */
            input[type="number"], 
            input[type="text"], 
            select {
                min-height: 44px;
                touch-action: manipulation;
            }
            
            /* 表格滚动优化 */
            .table-container {
                -webkit-overflow-scrolling: touch;
                scroll-behavior: smooth;
            }
            
            /* 防止双击缩放 */
            * {
                touch-action: manipulation;
            }
            
            /* 图表容器触摸优化 */
            .chart-container {
                touch-action: pan-x pan-y;
            }
            
            /* 长按选择优化 */
            .table-container table td {
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            
            /* 输入框保持可选择 */
            input, select, textarea {
                -webkit-user-select: text;
                -moz-user-select: text;
                -ms-user-select: text;
                user-select: text;
            }
        }
        
        /* 横屏适配 */
        @media (max-width: 768px) and (orientation: landscape) {
            .tab-nav {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .tab-nav button {
                flex: 1;
                min-width: 80px;
            }
            
            .chart-container {
                height: 250px;
            }
            
            .table-container table {
                min-width: 800px;
            }
        }
        
        /* 加载动画 */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        /* 进度条动画 */
        #progress-bar {
            transition: width 0.3s ease;
        }
        
        /* 计算按钮禁用状态 */
        .action-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* 调整表格行高 */
        .table-container table th,
        .table-container table td {
            height: 38px;
            padding: 4px;
        }

        /* 调整表头宽度 */
        .table-container table th:first-child,
        .table-container table td:first-child {
            width: 80px;
            min-width: 80px;
        }
        
        /* 调整技能选择下拉框宽度 */
        .table-container table th:nth-child(2),
        .table-container table td:nth-child(2) {
            width: 120px;
            min-width: 120px;
        }


        /* 调整数据列宽度 */
        .table-container table th:nth-child(n+3),
        .table-container table td:nth-child(n+3) {
            width: 60px;
            min-width: 60px;
        }
        
        /* 标签页内容的动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 模式选择器样式 - 现在位于表格上方 */
        
        .mode-select-label {
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            white-space: nowrap;
        }
        
        .mode-select {
            padding: 6px 12px;
            border: 2px solid #ced4da;
            border-radius: 6px;
            background: white;
            font-size: 14px;
            color: #495057;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }
        
        .mode-select:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        .mode-select:hover {
            border-color: #007bff;
        }
        
        
        /* 右侧自选模式配置区域 */
        .custom-mode-config {
            display: none;
            flex: 1;
            opacity: 0;
            transform: translateX(-10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .custom-mode-config.show {
            display: block;
            opacity: 1;
            transform: translateX(0);
        }
        
        .custom-config-content {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .config-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
            min-width: 120px;
        }
        
        .config-label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .config-icon {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .config-input {
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            background: white;
            font-size: 14px;
            color: #495057;
            transition: all 0.3s ease;
            width: 100%;
            box-sizing: border-box;
        }
        
        .config-input:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
            transform: translateY(-1px);
        }
        
        .config-input:hover {
            border-color: #007bff;
        }
        
        .graduation-input {
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
        }
        
        .t-value-input {
            background: linear-gradient(135deg, #f0f8ff 0%, #ffffff 100%);
        }
        
        .apply-custom-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            min-width: 120px;
            justify-content: center;
        }
        
        .apply-custom-btn:hover {
            background: linear-gradient(135deg, #0056b3 0%, #004085 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 123, 255, 0.4);
        }
        
        .apply-custom-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
        }
        
        .btn-icon {
            font-size: 12px;
            opacity: 0.9;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .damage-controls-container {
                flex-direction: column;
                align-items: stretch;
                justify-content: flex-start;
                gap: 12px;
                margin-top: 10px;
            }
            
            .damage-mode-selector {
                justify-content: center;
            }
            
            .custom-config-content {
                justify-content: center;
            }
            
            .config-item {
                min-width: 100px;
            }
        }
        
        /* 左侧控制区域样式调整 */
        .rotation-controls-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .rotation-config-row {
            margin-bottom: 0;
        }
        
        /* 蓝白色主题表格样式 */
        .damage-stats-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'Microsoft YaHei', 'SimSun', sans-serif;
            font-size: 14px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
            border: 2px solid #3b82f6;
        }
        
        .damage-stats-table th {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: #ffffff;
            font-weight: 700;
            padding: 12px 8px;
            text-align: center;
            border-bottom: 2px solid #1e40af;
            font-size: 14px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .damage-stats-table td {
            padding: 12px 8px;
            text-align: center;
            border-bottom: 1px solid #dbeafe;
            background: #ffffff;
            font-size: 14px;
            font-weight: 500;
            color: #1e40af;
            transition: background-color 0.3s ease;
        }
        
        .damage-stats-table td:hover {
            background: #f0f9ff;
        }
        
        .damage-stats-table .row-label {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            color: #ffffff;
            font-weight: 700;
            text-align: center;
            border-right: 2px solid #1e40af;
            font-size: 14px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .damage-stats-table td:not(.row-label) {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-weight: 600;
            color: #1e40af;
            font-size: 14px;
            background: #ffffff;
        }
        
        .damage-stats-table td:not(.row-label):hover {
            background: #f0f9ff;
            color: #1d4ed8;
        }
        
        /* 表格容器样式 */
        .damage-stats-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 8px;
            padding: 16px;
            border: 2px solid #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
            flex: 1;
            margin: 0 10px;
        }
        
        /* 说明文本框样式 */
        .explanation-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 8px;
            padding: 16px;
            border: 2px solid #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
            flex: 1;
            min-width: 300px;
        }
        
        .explanation-section h3 {
            margin: 0 0 12px 0;
            color: #1e40af;
            font-size: 16px;
            font-weight: 700;
            text-align: center;
        }
        
        .explanation-content {
            height: 100%;
        }
        
        .explanation-text {
            width: 100%;
            height: 200px;
            padding: 12px;
            border: 2px solid #dbeafe;
            border-radius: 6px;
            background: #ffffff;
            font-family: 'Microsoft YaHei', 'SimSun', sans-serif;
            font-size: 13px;
            color: #1e40af;
            line-height: 1.5;
            overflow-y: auto;
            box-sizing: border-box;
        }
        
        .explanation-text h4 {
            margin: 0 0 8px 0;
            color: #1e40af;
            font-size: 14px;
            font-weight: 700;
            border-bottom: 1px solid #dbeafe;
            padding-bottom: 4px;
        }
        
        .explanation-text p {
            margin: 6px 0;
            color: #374151;
            font-size: 12px;
        }
        
        .explanation-text ul {
            margin: 6px 0;
            padding-left: 16px;
        }
        
        .explanation-text li {
            margin: 3px 0;
            color: #374151;
            font-size: 12px;
        }
        
        .explanation-text strong {
            color: #1e40af;
            font-weight: 700;
        }
        
        /* 三列布局样式 */
        .rotation-layout-container {
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }
        
        .rotation-controls-section {
            flex: 1;
            min-width: 300px;
        }
        
        /* 响应式设计 */
        @media (max-width: 1200px) {
            .rotation-layout-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .damage-stats-section,
            .explanation-section {
                margin: 0;
                min-width: auto;
            }
        }
        
        @media (max-width: 768px) {
            .damage-stats-table {
                font-size: 12px;
            }
            
            .damage-stats-table th,
            .damage-stats-table td {
                padding: 8px 6px;
                font-size: 12px;
            }
            
            .explanation-text {
                height: 150px;
                font-size: 11px;
            }
            
            .explanation-text h4 {
                font-size: 12px;
            }
            
            .explanation-text p,
            .explanation-text li {
                font-size: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .damage-stats-table {
                font-size: 10px;
            }
            
            .damage-stats-table th,
            .damage-stats-table td {
                padding: 6px 4px;
                font-size: 10px;
            }
        }
        
        /* 更精细的移动端断点优化 */
        @media (max-width: 374px) {
            /* 超小屏手机优化 */
            body {
                font-size: 12px;
                padding: 4px;
            }
            
            .container {
                padding: 4px;
            }
            
            .tab-nav button {
                padding: 8px 10px;
                font-size: 11px;
            }
            
            .input-row input,
            .input-row select {
                font-size: 16px;
                padding: 8px 10px;
                min-height: 40px;
            }
            
            .action-btn {
                padding: 8px 12px;
                font-size: 12px;
                min-height: 40px;
            }
            
            .table-container table {
                min-width: 500px;
                font-size: 10px;
            }
            
            th, td {
                padding: 4px 2px;
                font-size: 10px;
            }
        }
        
        @media (min-width: 375px) and (max-width: 413px) {
            /* 小屏手机优化 */
            body {
                font-size: 13px;
            }
            
            .tab-nav button {
                padding: 10px 12px;
                font-size: 12px;
            }
            
            .input-row input,
            .input-row select {
                font-size: 16px;
                padding: 10px 12px;
            }
            
            .action-btn {
                padding: 10px 14px;
                font-size: 13px;
            }
            
            .table-container table {
                min-width: 550px;
                font-size: 11px;
            }
        }
        
        @media (min-width: 414px) and (max-width: 767px) {
            /* 中屏手机优化 */
            body {
                font-size: 14px;
            }
            
            .tab-nav {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .tab-nav button {
                flex: 1;
                min-width: 100px;
                padding: 12px 16px;
                font-size: 14px;
            }
            
            .input-row {
                flex-direction: row;
                align-items: center;
            }
            
            .input-row label {
                width: 120px;
                margin-bottom: 0;
            }
            
            .input-row input,
            .input-row select {
                flex: 1;
                max-width: 200px;
                font-size: 16px;
            }
            
            .action-btn {
                padding: 12px 16px;
                font-size: 14px;
            }
            
            .table-container table {
                min-width: 700px;
                font-size: 13px;
            }
        }
        
        /* 移动端浏览器特殊优化 */
        @media (max-width: 768px) {
            /* 微信浏览器优化 */
            .wechat-browser .container {
                padding-bottom: 20px;
            }
            
            /* iOS Safari优化 */
            .ios-safari .table-container {
                -webkit-overflow-scrolling: touch;
            }
            
            /* Android Chrome优化 */
            .android-chrome .action-btn {
                touch-action: manipulation;
            }
            
            /* UC浏览器优化 */
            .uc-browser input,
            .uc-browser select {
                -webkit-appearance: none;
                border-radius: 0;
            }
        }
        
    </style>
    </head>
<body>
    <!-- 页面通知组件 -->
    <div id="page-notification" class="page-notification" style="display: none;">
        <div class="notification-content">
            <span class="notification-icon">✓</span>
            <span class="notification-message"></span>
        </div>
    </div>

    <div class="container">
        <!-- 标签页 -->
          <div class="tabs" style="text-align: left;">
                <button class="tab-button active" data-tab="basic-info">基础信息</button>
                <button class="tab-button" data-tab="rotation">计算界面</button>
                <button class="tab-button" data-tab="damage-stats">伤害统计</button>
                <button class="tab-button" data-tab="trait-diy">词条DIY</button>
                <button class="tab-button" data-tab="skill-buff-data">数据参考</button>
          </div>
        
        <!-- 基础信息标签页内容 -->
        <div id="basic-info" class="tab-content active">
            <h2>基础信息</h2>
            
            <!-- 攻击属性面板 -->
            <div class="panel-container" style="display: flex; gap: 20px;">
                <div class="panel-section" style="width: 33.33%;">
                    <h3>战斗属性</h3>
                    <div class="input-group" style="gap: 2px;">
                        <!-- 外功攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>外功攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="external-attack-min" value="1299" min="0" placeholder="最小值">
                                <span>-</span>
                                <input type="number" id="external-attack-max" value="3602" min="0" placeholder="最大值">
                            </div>
                        </div>
                        
                        <!-- 精准率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="precision-rate">精准率(%):</label>
                            <input type="number" id="precision-rate" value="100" min="0" max="100" step="0.1">
                        </div>
                        
                        <!-- 会心率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="critical-rate">会心率(%):</label>
                            <input type="number" id="critical-rate" value="68.2" min="0" max="100" step="0.1">
                        </div>
                        
                        <!-- 会意率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="intent-rate">会意率(%):</label>
                            <input type="number" id="intent-rate" value="18.8" min="0" max="100" step="0.1">
                        </div>
                        
                        <!-- 直接会心率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="direct-critical-rate">直接会心率(%):</label>
                            <input type="number" id="direct-critical-rate" value="4.6" min="0" step="0.1">
                        </div>
                        
                        <!-- 直接会意率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="direct-intent-rate">直接会意率(%):</label>
                            <input type="number" id="direct-intent-rate" value="0.0" min="0" step="0.1">
                        </div>
                        
                        <!-- 鸣金攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>鸣金攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="ring-metal-attack-min" value="0" min="0" placeholder="最小值">
                                <span>-</span>
                                <input type="number" id="ring-metal-attack-max" value="0" min="0" placeholder="最大值">
                            </div>
                        </div>
                        
                        <!-- 裂石攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>裂石攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="break-rock-attack-min" value="0" min="0" placeholder="最小值">
                                <span>-</span>
                                <input type="number" id="break-rock-attack-max" value="0" min="0" placeholder="最大值">
                            </div>
                        </div>
                        
                        <!-- 牵丝攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>牵丝攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="pull-silk-attack-min" value="0" min="0" placeholder="最小值">
                                <span>-</span>
                                <input type="number" id="pull-silk-attack-max" value="0" min="0" placeholder="最大值">
                            </div>
                        </div>
                        
                        <!-- 破竹攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>破竹攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="break-bamboo-attack-min" value="365" min="0" placeholder="最小值">
                                <span>-</span>
                                <input type="number" id="break-bamboo-attack-max" value="655" min="0" placeholder="最大值">
                            </div>
                        </div>
                        
                        <!-- 会心伤害加成 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="critical-damage-bonus">会心伤害加成(%):</label>
                            <input type="number" id="critical-damage-bonus" value="57.9" min="0" step="0.1">
                        </div>
                        
                        <!-- 会意伤害加成 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="intent-damage-bonus">会意伤害加成(%):</label>
                            <input type="number" id="intent-damage-bonus" value="35.0" min="0" step="0.1">
                        </div>
                        
                        <!-- 外功穿透 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="external-penetration">外功穿透:</label>
                            <input type="number" id="external-penetration" value="44" min="0" max="100" step="0.1">
                        </div>
                        
                        <!-- 属攻穿透 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="elemental-penetration">属攻穿透:</label>
                            <input type="number" id="elemental-penetration" value="28" min="0">
                        </div>
                        
                        <!-- 外功伤害加成 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="external-damage-bonus">外功伤害加成(%):</label>
                            <input type="number" id="external-damage-bonus" value="0.0" min="0" step="0.1">
                        </div>
                        
                        <!-- 属攻伤害加成 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="elemental-damage-bonus">属攻伤害加成(%):</label>
                            <input type="number" id="elemental-damage-bonus" value="9" min="0" step="0.1">
                        </div>
                    </div>
                </div>
                
                <!-- 伤害增益面板 -->
                <div class="panel-section" style="width: 33.33%;">
                    <h3>伤害增益</h3>
                    <div class="input-group" style="gap: 2px;">
                        
                        <!-- 装备增伤 -->
                        <h4>装备增伤</h4>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="rope-dart-bonus">绳镖武学增伤(%):</label>
                            <input type="number" id="rope-dart-bonus" value="6.2" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="dual-blades-bonus">双刀武学增伤(%):</label>
                            <input type="number" id="dual-blades-bonus" value="0.0" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="all-martial-bonus">全武学增伤(%):</label>
                            <input type="number" id="all-martial-bonus" value="6.4" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="boss-unit-bonus">首领单位增伤(%):</label>
                            <input type="number" id="boss-unit-bonus" value="6.4" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="light-strike-bonus">强效轻击增伤(%):</label>
                            <input type="number" id="light-strike-bonus" value="0.0" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="mouse-bonus">鼠鼠定音增伤(%):</label>
                            <input type="number" id="mouse-bonus" value="24.0" min="0" step="0.1">
                        </div>
                        
                        <!-- 其他增伤 -->
                        <h4 style="margin: 10px 0 5px 0;">其他增伤</h4>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="boss-defense">BOSS防御:</label>
                            <select id="boss-defense" class="select-input enhanced-select">
                                <option value="407" selected>96级BOSS</option>
                            </select>
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="boss-talent-select">BOSS天赋:</label>
                            <select id="boss-talent-select" class="select-input enhanced-select">
                                <option value="wooden-dummy" selected>木桩</option>
                                <option value="trial-sword">试剑/侠境</option>
                            </select>
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="equipment-set">套装装备:</label>
                            <select id="equipment-set" class="select-input enhanced-select">
                                <option value="无">无</option>
                                <option value="飞隼" selected>飞隼</option>
                                <option value="燕归">燕归</option>
                                <option value="新燕归">新燕归</option>
                                <option value="时雨">时雨</option>
                                <option value="浣花">浣花</option>
                                <option value="岳山">岳山</option>
                            </select>
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="food-buff">食物增益:</label>
                            <select id="food-buff" class="select-input enhanced-select">
                                <option value="无">无</option>
                                <option value="涮鱼" selected>涮鱼</option>
                            </select>
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="talisman">符帖:</label>
                            <select id="talisman" class="select-input enhanced-select">
                                <option value="无">无</option>
                                <option value="会心帖">会心</option>
                                <option value="真气会心帖" selected>真气会心</option>
                                <option value="会意帖">会意</option>
                                <option value="奇术帖">奇术</option>
                                <option value="承欢帖">承欢</option>
                                <option value="真气会意帖">真气会意</option>
                                <option value="真气属攻帖">真气属攻</option>
                            </select>
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="crafting-bonus">天工:</label>
                            <select id="crafting-bonus" class="select-input enhanced-select">
                                <option value="无">无</option>
                                <option value="天工火" selected>火</option>
                                <option value="天工毒">毒</option>
                            </select>
                        </div>
                        
                        <!-- 计算按钮移动到天工模块下方，平铺样式 -->
                        <div class="input-row" style="padding: 10px 0; text-align: center;">
                            <button id="save-panel-btn" class="save-button-flat">
                                <span class="button-text">计算</span>
                                <span class="keyboard-hint">
                                    <span class="keyboard-icon">⌨</span>
                                    <span class="keyboard-text">空格</span>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 计算模块 -->
                <div class="panel-section" style="width: 33.33%;">
                    <h3>说明</h3>
                    <div style="padding: 10px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 6px; color: #856404; font-size: 14px; text-align: center;">
                        <strong>参考了Violetta和yoka两位大佬的表格，然后稍微加了点功能。AI自动堆叠的，可能有些潜在问题，仅供参考。</strong>
                    </div>
                    
                    <!-- 词条毕业度对比表格 -->
                    <div class="trait-graduation-table-container" style="margin-top: 15px;">
                        <h4 style="margin-bottom: 12px; color: #2c3e50; font-size: 16px; font-weight: 600; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-shadow: 0 2px 4px rgba(0,0,0,0.1);">单词条毕业度提升</h4>
                        <table id="trait-graduation-table" class="trait-graduation-table" style="width: 100%; border-collapse: collapse; border: 1px solid #ddd; font-size: 14px;">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; font-size: 14px;">词条</th>
                                    <th style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; font-size: 14px;">毕业度</th>
                                </tr>
                            </thead>
                            <tbody id="trait-graduation-tbody">
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>大外功</strong><span style="color: #0000FF;">(77.8)</span></td>
                                    <td id="trait-graduation-damage" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>小外功</strong><span style="color: #0000FF;">(77.8)</span></td>
                                    <td id="trait-graduation-external-min" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>大破竹</strong><span style="color: #0000FF;">(44.2)</span></td>
                                    <td id="trait-graduation-breakbamboo-max" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>小破竹</strong><span style="color: #0000FF;">(44.2)</span></td>
                                    <td id="trait-graduation-breakbamboo-min" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>小外属</strong><span style="color: #0000FF;">(44.2)</span></td>
                                    <td id="trait-graduation-breakrock-min" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>精准率</strong><span style="color: #0000FF;">(4.84)</span></td>
                                    <td id="trait-graduation-precision" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>会心率</strong><span style="color: #0000FF;">(5.45)</span></td>
                                    <td id="trait-graduation-critical" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>会意率</strong><span style="color: #0000FF;">(2.67)</span></td>
                                    <td id="trait-graduation-intent" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>劲</strong><span style="color: #0000FF;">(11.1&&67.2)</span></td>
                                    <td id="trait-graduation-jing" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>敏</strong><span style="color: #0000FF;">(44.5&&2.28)</span></td>
                                    <td id="trait-graduation-min" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>势</strong><span style="color: #0000FF;">(44.5&&1.14)</span></td>
                                    <td id="trait-graduation-shi" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>绳镖武学</strong><span style="color: #0000FF;">(6.2)</span></td>
                                    <td id="trait-graduation-shengbiao" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>双刀武学</strong><span style="color: #0000FF;">(6.2)</span></td>
                                    <td id="trait-graduation-shuangdao" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>全武学</strong><span style="color: #0000FF;">(3.2)</span></td>
                                    <td id="trait-graduation-quanwuxue" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 14px; color: #000;"><strong>首领单位</strong><span style="color: #0000FF;">(3.2)</span></td>
                                    <td id="trait-graduation-shouling" style="padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: bold; color: #000; font-size: 14px;">0.00%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- 注意说明文本 -->
                    <div style="margin-top: 15px; padding: 12px; background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; font-size: 14px; color: #6c757d; line-height: 1.5;">
                        <div style="margin-bottom: 10px; font-weight: bold;">
                            <strong>注意：</strong>
                        </div>
                        <div style="margin-bottom: 8px; font-weight: bold;">
                            1. 敏和小破竹未考虑武学天赋，会意未考虑飞隼情况，上述结果仅供参考；若手动删减一个词条，表格显示的结果会更准确。
                        </div>
                        <div style="font-weight: bold;">
                            2. 因数据量较大，暂未支持实时计算；若结果显示存疑，可点击空格（计算键）重新计算。
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        
        <!-- 计算界面标签页内容 -->
        <div id="rotation" class="tab-content">
            <h2>计算界面</h2>
            
            <!-- 优化后的排轴控制区域 -->
            <div class="rotation-main-container">
                <!-- 功能区域、表格和说明的三列布局 -->
                <div class="rotation-layout-container">
                    <!-- 左侧功能区域 -->
                    <div class="rotation-controls-section">
                        <!-- 第一行：四个主要操作按钮 -->
                        <div class="rotation-actions-container">
                            <div class="rotation-actions-row">
                                <button id="clear-rotation-btn" class="action-btn clear-btn">清空排轴</button>
                                <button id="save-rotation-btn" class="action-btn save-btn">保存排轴</button>
                                <button id="import-rotation-btn" class="action-btn import-btn">导入排轴</button>
                                <button id="simulation-btn" class="action-btn simulation-btn">模拟<br>计算</button>
                            </div>
                        </div>
                        
                        <!-- 第二行：配置管理 -->
                        <div class="rotation-config-row">
                            <div class="config-section">
                                <label for="saved-rotation-configs">已保存的配置：</label>
                                <select id="saved-rotation-configs">
                                    <option value="">选择已保存的排轴配置</option>
                                </select>
                                <button id="delete-rotation-config-btn" class="delete-config-btn">删除配置</button>
                            </div>
                        </div>
                        
                        <!-- 套装切换说明 -->
                        <div class="equipment-switch-notice">
                            <span class="notice-text"><strong>飞隼和燕归采用的是同一个轴的模板，只是套装效果进行了更改；断石同理。所以燕归总体会比飞隼少2%左右。</strong><br><span style="color: #dc3545; font-weight: bold; background-color: #fff3cd; padding: 4px 8px; border-radius: 4px; border-left: 4px solid #ffc107;">⚠️ 木桩轴和竞速轴切换时，需到基础信息页面手动切换BOSS天赋。</span></span>
                        </div>
                        
                        <!-- 右侧：自选模式配置区域 -->
                        <div id="custom-mode-config" class="custom-mode-config">
                            <div class="custom-config-content">
                                <div class="config-item">
                                    <label for="custom-graduation-damage" class="config-label">
                                        <i class="config-icon">🎯</i>
                                        毕业伤害
                                    </label>
                                    <input type="number" id="custom-graduation-damage" value="3267719" min="0" step="1000" class="config-input graduation-input">
                                </div>
                                
                                <div class="config-item">
                                    <label for="custom-t-value" class="config-label">
                                        <i class="config-icon">⏱️</i>
                                        时间
                                    </label>
                                    <input type="number" id="custom-t-value" value="60" min="1" max="200" step="1" class="config-input t-value-input">
                                </div>
                                
                                <button id="apply-custom-config" class="apply-custom-btn">
                                    <i class="btn-icon">✓</i>
                                    应用配置
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 中间伤害表格 -->
                    <div class="damage-stats-section">
                        <!-- 模式选择控件 - 放置在表格上方左对齐 -->
                        <div style="margin-bottom: 10px; text-align: left; display: flex; align-items: center; gap: 12px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <select id="damage-mode-select" class="mode-select">
                                    <option value="none" selected>无</option>
                                    <option value="feisun_yishui">飞隼易水</option>
                                    <option value="feisun_duanshi">飞隼断石</option>
                                    <option value="yangui_yishui">燕归易水</option>
                                    <option value="yangui_duanshi">燕归断石</option>
                                    <option value="puwu_lao1">普五老一</option>
                                    <option value="custom">自选</option>
                                </select>
                            </div>
                            <span class="rotation-disclaimer">打桩轴为理想轴仅用于测算自身毕业率，实战有所出入</span>
                        </div>
                        <!-- 加载状态指示器 -->
                        <div id="calculation-loading" style="display: none; text-align: center; padding: 20px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; margin-bottom: 10px;">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                                <div class="spinner" style="width: 20px; height: 20px; border: 2px solid #f3f3f3; border-top: 2px solid #007bff; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                                <span style="color: #007bff; font-weight: bold;">正在计算中...</span>
                            </div>
                        </div>
                        
                        <!-- 错误信息显示 -->
                        <div id="calculation-error" style="display: none; text-align: center; padding: 10px; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 6px; margin-bottom: 10px; color: #721c24;">
                        </div>
                        
                        <!-- 进度条容器 -->
                        <div id="progress-container" style="display: none; margin-bottom: 10px;">
                            <div style="background: #e9ecef; border-radius: 10px; height: 6px; overflow: hidden;">
                                <div id="progress-bar" style="background: linear-gradient(90deg, #007bff, #28a745); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                            </div>
                            <div id="progress-text" style="text-align: center; margin-top: 5px; font-size: 12px; color: #6c757d;"></div>
                        </div>
                        
                        <table id="damage-stats-table" class="damage-stats-table enhanced-table">
                            <thead>
                                <tr>
                                    <th class="table-header"></th>
                                    <th class="table-header">伤害</th>
                                    <th class="table-header">DPS</th>
                                    <th class="table-header">毕业率</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="table-row">
                                    <td class="row-label">毕业</td>
                                    <td id="graduation-damage" class="data-cell">-</td>
                                    <td id="graduation-dps" class="data-cell">-</td>
                                    <td id="graduation-rate" class="data-cell">-</td>
                                </tr>
                                <tr class="table-row">
                                    <td class="row-label">期望</td>
                                    <td id="expected-damage" class="data-cell">-</td>
                                    <td id="expected-dps" class="data-cell">-</td>
                                    <td id="expected-rate" class="data-cell">-</td>
                                </tr>
                                <tr class="table-row">
                                    <td class="row-label">模拟</td>
                                    <td id="simulation-damage" class="data-cell">-</td>
                                    <td id="simulation-dps" class="data-cell">-</td>
                                    <td id="simulation-rate" class="data-cell">-</td>
                                </tr>
                            </tbody>
                        </table>
                        

                    </div>
                    
                    <!-- 右侧说明文本框 -->
                    <div class="explanation-section">
                        <h3>说明(仅供参考)</h3>
                        <div class="explanation-content">
                            <div class="explanation-text">
                                <h4>计算</h4>
                                <li><strong>期望计算：</strong>基于理论概率计算的平均伤害值，使用伤害公式直接计算各种情况下的期望伤害。</li>
                                <li><strong>模拟计算：</strong>通过随机数模拟实际战斗过程。即攻击值=random[min,max],概率判定=random(0,1)掉落在生效权重区间的结果。</li>                               
                                <h4>极乐泣血</h4>
                                <li><strong>自动计算：</strong>层数=Hit*0.15，期望3.5层累计一次刺伤，次数自动计算</li>
                                <li><strong>手动输入：</strong>勾选"极乐手动"复选框后，可以自由修改极乐泣血的次数</li>
                                <h4>技能</h4>
                                <li>红刀A2(1/2),红刀A4(5/7)，丢部分伤害</li>
                                <li>箫音千浪(炸后)：炸前与炸后的落笛倍率不一样，炸前的符合官方面板参数</li>
                                <li>泣血Dot和天工Dot的触发次数不会算</li>
                                <h4>其他</h4>

                                <li>最好在PC端使用，未做移动端适配</li>
                                <li>浣花套未实装，免费的AI有点听不懂啥意思</li>
                                <li>代码都是AI自动生成堆叠的，所以计算界面有点卡顿</li>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 隐藏的文件输入元素用于导入功能 -->
                <input type="file" id="rotation-file-input" accept=".json" style="display: none;">
            </div>
            
            <!-- 联动模式和极乐泣血模式控制 -->
            <div class="cascade-control-container" style="margin: 10px 0; padding: 8px; background: #f5f5f5; border-radius: 4px; border: 1px solid #ddd;">
                <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                    <!-- 联动模式复选框 -->
                    <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #333;">
                        <input type="checkbox" id="cascade-mode-toggle" checked style="transform: scale(1.1);">
                        <span>联动模式：启用后，选择某个位置的下拉框时，该位置以下的所有相同类型下拉框将自动同步选择相同内容</span>
                    </label>
                    
                    <!-- 极乐泣血手动模式复选框 -->
                    <label style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #333;">
            <input type="checkbox" id="jile-manual-mode-toggle" checked style="transform: scale(1.1);">
                        <span>极乐手动：勾选后可以手动修改极乐泣血的次数，不勾选则自动计算</span>
                    </label>
                </div>
            </div>
            
            <div class="table-container">
                <table id="rotation-table">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>技能名称</th>
                            <th>BUFF名称</th>
                            <th>次数</th>
                            <th>伤害</th>
                            <th id="set-layer-header">
                                <select id="set-layer-header-select" style="width: 120px; text-align: center; background: transparent; border: 1px solid #ccc; padding: 2px;">
                                    <option value="">选择套装</option>
                                    <option value="无">无</option>
                                    <option value="飞隼">飞隼</option>
                                    <option value="燕归">燕归</option>
                                    <option value="新燕归">新燕归</option>
                                    <option value="时雨">时雨</option>
                                    <option value="浣花">浣花</option>
                                    <option value="岳山">岳山</option>
                                </select>
                            </th>
                            <th>符帖</th>
                            <th>易水歌</th>
                            <th>所恨年年</th>
                            <th>气竭</th>
                            <th>奶伞</th>
                            <th>易伤</th>
                            <th>外功会心</th>
                            <th>外功会意</th>
                            <th>外功白字</th>
                            <th>外功擦伤</th>
                            <th>破竹会心</th>
                            <th>破竹会意</th>
                            <th>破竹白字</th>
                            <th>破竹擦伤</th>
                            <th>外属会心</th>
                            <th>外属会意</th>
                            <th>外属白字</th>
                            <th>外属擦伤</th>
                            <th>生效会心</th>
                            <th>生效会意</th>
                            <th>生效白字</th>
                            <th>生效擦伤</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 排轴数据将通过JavaScript动态加载 -->
                    </tbody>
                </table>
                <button id="add-row-btn" class="add-row-btn">添加行</button>
            </div>
            

        </div>
        
        <!-- 伤害统计标签页内容 -->
        <div id="damage-stats" class="tab-content">
            <h2>伤害统计</h2>
            
            <div class="stats-container">
                <!-- 图表1和图表2的水平并排布局 -->
                <div class="charts-row">
                    <!-- 图表1：伤害分布 -->
                    <div class="chart-section">
                        <h3>伤害分布</h3>
                        <div class="chart-container">
                            <canvas id="damageTypeChart" width="400" height="300"></canvas>
                        </div>
                        <div class="chart-legend" id="damageTypeLegend"></div>
                    </div>

                    <!-- 图表2：暴击分布 -->
                    <div class="chart-section">
                        <h3>暴击分布</h3>
                        <div class="chart-container">
                            <canvas id="critTypeChart" width="400" height="300"></canvas>
                        </div>
                        <div class="chart-legend" id="critTypeLegend"></div>
                    </div>
                </div>

                <!-- 图表3和图表4的水平并排布局 -->
                <div class="charts-row">
                    <!-- 图表3：技能统计（饼状图） -->
                    <div class="chart-section">
                        <h3>技能分布</h3>
                        <div class="chart-container">
                            <canvas id="skillDamageChart" width="400" height="300"></canvas>
                        </div>
                        <div class="chart-legend" id="skillDamageLegend"></div>
                    </div>

                    <!-- 图表4：状态分布（饼状图） -->
                    <div class="chart-section">
                        <h3>状态分布</h3>
                        <div class="chart-container">
                            <canvas id="statusDamageChart" width="400" height="300"></canvas>
                        </div>
                        <div class="chart-legend" id="statusDamageLegend"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 词条DIY标签页内容 -->
        <div id="trait-diy" class="tab-content">
            <h2>词条DIY</h2>
            
            <!-- 攻击属性面板 -->
            <div class="panel-container" style="display: flex; gap: 20px;">
                <div class="panel-section" style="width: 33.33%;">
                    <h3>战斗属性</h3>
                    <div class="input-group" style="gap: 2px;">
                        <!-- 外功攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>外功攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="diy-external-attack-min" value="616" min="0" step="0.1" placeholder="最小值" readonly>
                                <span>-</span>
                                <input type="number" id="diy-external-attack-max" value="1024" min="0" step="0.1" placeholder="最大值" readonly>
                            </div>
                        </div>
                        
                        <!-- 精准率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-precision-rate">精准率(%):</label>
                            <input type="number" id="diy-precision-rate" value="86.3" min="0" max="100" step="0.1" readonly>
                        </div>
                        
                        <!-- 会心率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-critical-rate">会心率(%):</label>
                            <input type="number" id="diy-critical-rate" value="24.4" min="0" max="80" step="0.1" readonly>
                        </div>
                        
                        <!-- 会意率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-intent-rate">会意率(%):</label>
                            <input type="number" id="diy-intent-rate" value="10.8" min="0" max="100" step="0.1" readonly>
                        </div>
                        
                        <!-- 直接会心率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-direct-critical-rate">直接会心率(%):</label>
                            <input type="number" id="diy-direct-critical-rate" value="0.0" min="0" step="0.1" readonly>
                        </div>
                        
                        <!-- 直接会意率 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-direct-intent-rate">直接会意率(%):</label>
                            <input type="number" id="diy-direct-intent-rate" value="0.0" min="0" step="0.1" readonly>
                        </div>
                        
                        <!-- 鸣金攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>鸣金攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="diy-ring-metal-attack-min" value="0" min="0" step="0.1" placeholder="最小值" readonly>
                                <span>-</span>
                                <input type="number" id="diy-ring-metal-attack-max" value="0" min="0" step="0.1" placeholder="最大值" readonly>
                            </div>
                        </div>
                        
                        <!-- 裂石攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>裂石攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="diy-break-rock-attack-min" value="0" min="0" step="0.1" placeholder="最小值" readonly>
                                <span>-</span>
                                <input type="number" id="diy-break-rock-attack-max" value="0" min="0" step="0.1" placeholder="最大值" readonly>
                            </div>
                        </div>
                        
                        <!-- 牵丝攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>牵丝攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="diy-pull-silk-attack-min" value="0" min="0" step="0.1" placeholder="最小值" readonly>
                                <span>-</span>
                                <input type="number" id="diy-pull-silk-attack-max" value="0" min="0" step="0.1" placeholder="最大值" readonly>
                            </div>
                        </div>
                        
                        <!-- 破竹攻击 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>破竹攻击:</label>
                            <div class="input-pair">
                                <input type="number" id="diy-break-bamboo-attack-min" value="160" min="0" step="0.1" placeholder="最小值" readonly>
                                <span>-</span>
                                <input type="number" id="diy-break-bamboo-attack-max" value="320" min="0" step="0.1" placeholder="最大值" readonly>
                            </div>
                        </div>
                        
                        <!-- 会心伤害加成 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-critical-damage-bonus">会心伤害加成(%):</label>
                            <input type="number" id="diy-critical-damage-bonus" value="50.0" min="0" step="0.1" readonly>
                        </div>
                        
                        <!-- 会意伤害加成 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-intent-damage-bonus">会意伤害加成(%):</label>
                            <input type="number" id="diy-intent-damage-bonus" value="35.0" min="0" step="0.1" readonly>
                        </div>
                        
                        <!-- 外功穿透 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-external-penetration">外功穿透:</label>
                            <input type="number" id="diy-external-penetration" value="44" min="0" max="100" step="0.1" readonly>
                        </div>
                        
                        <!-- 属攻穿透 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-elemental-penetration">属攻穿透:</label>
                            <input type="number" id="diy-elemental-penetration" value="13.2" min="0" step="0.1" readonly>
                        </div>
                        
                        <!-- 外功伤害加成 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-external-damage-bonus">外功伤害加成(%):</label>
                            <input type="number" id="diy-external-damage-bonus" value="0.0" min="0" step="0.1" readonly>
                        </div>
                        
                        <!-- 属攻伤害加成 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-elemental-damage-bonus">属攻伤害加成(%):</label>
                            <input type="number" id="diy-elemental-damage-bonus" value="6.6" min="0" step="0.1" readonly>
                        </div>
                    </div>
                </div>
                
                <!-- 伤害增益面板 -->
                <div class="panel-section" style="width: 33.33%;">
                    <h3>伤害增益</h3>
                    <div class="input-group" style="gap: 2px;">
                        
                        <!-- 装备增伤 -->
                        <h4>装备增伤</h4>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-rope-dart-bonus">绳镖武学增伤(%):</label>
                            <input type="number" id="diy-rope-dart-bonus" value="0.0" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-dual-blades-bonus">双刀武学增伤(%):</label>
                            <input type="number" id="diy-dual-blades-bonus" value="0.0" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-all-martial-bonus">全武学增伤(%):</label>
                            <input type="number" id="diy-all-martial-bonus" value="0.0" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-boss-unit-bonus">首领单位增伤(%):</label>
                            <input type="number" id="diy-boss-unit-bonus" value="0.0" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-light-strike-bonus">强效轻击增伤(%):</label>
                            <input type="number" id="diy-light-strike-bonus" value="0.0" min="0" step="0.1">
                        </div>
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-mouse-bonus">鼠鼠定音增伤(%):</label>
                            <input type="number" id="diy-mouse-bonus" value="24.0" min="0" step="0.1">
                        </div>
                        
                        <!-- DIY操作按钮区域 -->
                        <div class="diy-buttons-container" style="margin: 10px 0;">
                            <button id="diy-import-to-basic-btn" class="diy-button">导入</button>
                        </div>

                        
                        <!-- 叠音 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>叠音:</label>
                            <div class="input-pair">
                                <input type="number" id="diy-quick-external-min" value="216" min="0" step="0.1">
                                <span>-</span>
                                <input type="number" id="diy-quick-external-max" value="432" min="0" step="0.1">
                            </div>
                        </div>
                        
                        <!-- 装备基础 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>装备基础:</label>
                            <div class="input-pair">
                                <input type="number" id="diy-equipment-basic-min" value="216" min="0" step="0.1">
                                <span>-</span>
                                <input type="number" id="diy-equipment-basic-max" value="431" min="0" step="0.1">
                            </div>
                        </div>
                        
                        <!-- 武库、装备、弓箭 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label for="diy-wuku-select">武库:</label>
                            <select id="diy-wuku-select" class="select-input" style="width: 80px; margin-right: 10px;">
                                <option value="无" selected>无</option>
                                <option value="通用">通用</option>
                                <option value="破竹">破竹</option>
                            </select>
                            <label for="diy-equipment-select" style="margin-left: 10px;">装备:</label>
                            <select id="diy-equipment-select" class="select-input" style="width: 80px; margin-right: 10px;">
                                <option value="无" selected>无</option>
                                <option value="飞隼">飞隼</option>
                                <option value="新燕归">新燕归</option>
                                <option value="时雨">时雨</option>
                                <option value="浣花">浣花</option>
                                <option value="岳山">岳山</option>
                            </select>
                            <label for="diy-bow-select" style="margin-left: 10px;">弓箭:</label>
                            <select id="diy-bow-select" class="select-input" style="width: 80px;">
                                <option value="无" selected>无</option>
                                <option value="精准">精准</option>
                                <option value="会心">会心</option>
                                <option value="会意">会意</option>
                            </select>
                        </div>
                        
                        <!-- 心法选择 -->
                        <h4>心法选择</h4>
                        <!-- 第一行：忘川、泥鱼 -->
                        <div class="input-row" style="padding: 0; display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; flex: 1; margin-right: 20px;">
                                <label style="margin-right: 8px; min-width: 40px;">忘川:</label>
                                <input type="checkbox" id="diy-wangchuan">
                            </div>
                            <div style="display: flex; align-items: center; flex: 1;">
                                <label style="margin-right: 8px; min-width: 40px;">泥鱼:</label>
                                <input type="checkbox" id="diy-niyu">
                            </div>
                        </div>
                        
                        <!-- 第二行：易水、断石 -->
                        <div class="input-row" style="padding: 0; display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; flex: 1; margin-right: 20px;">
                                <label style="margin-right: 8px; min-width: 40px;">易水:</label>
                                <input type="checkbox" id="diy-yishui">
                            </div>
                            <div style="display: flex; align-items: center; flex: 1;">
                                <label style="margin-right: 8px; min-width: 40px;">断石:</label>
                                <input type="checkbox" id="diy-duanshi">
                            </div>
                        </div>
                        
                        <!-- 第三行：极乐、征人 -->
                        <div class="input-row" style="padding: 0; display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; flex: 1; margin-right: 20px;">
                                <label style="margin-right: 8px; min-width: 40px;">极乐:</label>
                                <input type="checkbox" id="diy-jile">
                            </div>
                            <div style="display: flex; align-items: center; flex: 1;">
                                <label style="margin-right: 8px; min-width: 40px;">征人:</label>
                                <input type="checkbox" id="diy-zhengren">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- DIY模块 -->
                <div class="panel-section" style="width: 33.33%;">
                    <h3>DIY40 <span id="diy-count-display" style="color: #3b82f6; font-weight: 600;">(0)</span></h3>
                    <div class="input-group" style="gap: 2px;">
                        
                        <!-- 大外 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>大外:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-dawai-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-dawai-calculated" placeholder="" min="0" step="0.1" style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 小外 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>小外:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-xiaowai-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>  
                                <input type="number" id="diy-xiaowai-calculated" placeholder="" min="0" step="0.1" style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 大破 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>大破:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-dapo-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-dapo-calculated" placeholder="" min="0" step="0.1" style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 小破 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>小破:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-xiaopo-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-xiaopo-calculated" placeholder="" min="0" step="0.1" style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 小裂 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>小裂:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-xiaolie-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-xiaolie-calculated" placeholder="" min="0" step="0.1" style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 精准 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>精准:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-precision-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-precision-calculated" placeholder="" min="0" step="0.1" style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 会心 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>会心:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-crit-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-crit-calculated" placeholder="" min="0" step="0.1" style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 会意 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>会意:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-intent-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-intent-calculated" placeholder="" min="0" step="0.1" style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 敏 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>敏:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-min-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-min-calculated-1" placeholder="" min="0" step="0.1" style="width: 65px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-min-calculated-2" placeholder="" readonly style="width: 65px; margin-right: 5px;">
                                <span style="margin-right: 5px;">+</span>
                                <input type="number" id="diy-min-calculated-3" placeholder="" readonly style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 劲 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>劲:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-jin-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-jin-calculated-1" placeholder="" min="0" step="0.1" style="width: 65px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-jin-calculated-2" placeholder="" readonly style="width: 65px; margin-right: 5px;">
                                <span style="margin-right: 5px;">+</span>
                                <input type="number" id="diy-jin-calculated-3" placeholder="" readonly style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 势 -->
                        <div class="input-row" style="padding: 2px 0;">
                            <label>势:</label>
                            <div class="input-pair" style="display: flex; align-items: center; justify-content: flex-start; width: 100%;">
                                <input type="number" id="diy-shi-display" class="integer-input" placeholder="" min="0" step="1" style="width: 60px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-shi-calculated-1" placeholder="" min="0" step="0.1" style="width: 65px; margin-right: 5px;">
                                <span style="margin-right: 5px;">-</span>
                                <input type="number" id="diy-shi-calculated-2" placeholder="" readonly style="width: 65px; margin-right: 5px;">
                                <span style="margin-right: 5px;">+</span>
                                <input type="number" id="diy-shi-calculated-3" placeholder="" readonly style="width: 65px;">
                            </div>
                        </div>
                        
                        <!-- 四个模块分两行布局 -->
                        <!-- 第一行：绳镖武学和首领单位 -->
                        <div class="input-row" style="padding: 1px 0; display: flex; justify-content: space-between; align-items: center;">
                            <!-- 绳镖武学 -->
                            <div style="display: flex; align-items: center; flex: 1; margin-right: 20px;">
                                <label style="margin-right: 8px; min-width: 60px;">绳镖武学:</label>
                                <input type="checkbox" id="diy-rope-dart-martial">
                            </div>
                            
                            <!-- 首领单位（两个复选框） -->
                            <div style="display: flex; align-items: center; flex: 1;">
                                <label style="margin-right: 8px; min-width: 60px;">首领单位:</label>
                                <input type="checkbox" id="diy-boss-unit-1" style="margin-right: 15px;">
                                <input type="checkbox" id="diy-boss-unit-2">
                            </div>
                        </div>
                        
                        <!-- 第二行：双刀武学和全武学 -->
                        <div class="input-row" style="padding: 1px 0; display: flex; justify-content: space-between; align-items: center;">
                            <!-- 双刀武学 -->
                            <div style="display: flex; align-items: center; flex: 1; margin-right: 20px;">
                                <label style="margin-right: 8px; min-width: 60px;">双刀武学:</label>
                                <input type="checkbox" id="diy-dual-blade-martial">
                            </div>
                            
                            <!-- 全武学（两个复选框） -->
                            <div style="display: flex; align-items: center; flex: 1;">
                                <label style="margin-right: 8px; min-width: 60px;">全武学:</label>
                                <input type="checkbox" id="diy-all-martial-1" style="margin-right: 15px;">
                                <input type="checkbox" id="diy-all-martial-2">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            

            
        </div>
        
        <!-- 数据参考标签页内容 -->
        <div id="skill-buff-data" class="tab-content">
            <h2>数据参考</h2>
            
            <div class="formula-section">
                <div class="formula-container">
                    <p>总伤害计算公式如下：</p>
                    <div class="latex-formula">
                        $$\begin{aligned}
                        伤害 = \Bigg\{
                        & \Big[ (\text{外功攻击} - \text{有效BOSS防御}) \times \text{外功倍率} + \text{固定外功} \Big] \times \left(1 + \frac{\text{外穿}}{200}\right) \times (1 + \text{外攻伤害加成}\%) \times (1 + \text{通用增伤}\%) \times (1 + \text{会心(意)增伤}\%) \\
                        &+ \Big( \text{破竹攻击} \times \text{外功倍率} + \text{固定破竹} \Big) \times \left(1 + \frac{\text{属穿}}{200}\right) \times (1 + \text{属攻伤害加成}\%) \times 1.5 \times (1 + \text{通用增伤}\%) \times (1 + \text{会心(意)增伤}\%) \\
                        &+ \Big( \text{外属攻击} \times \text{外功倍率} \Big) \times (1 + \text{外属攻伤害加成}\%) \times (1 + \text{通用增伤}\%) \times (1 + \text{会心(意)增伤}\%)
                        \Bigg\} \times \text{定音增伤}(\%)
                        \end{aligned}$$
                    </div>
                </div>
            </div>
            
            <div class="three-rates-section">
                <h3>三率计算</h3>
                <div class="rates-table-container">
                    <table class="rates-table">
                        <thead>
                            <tr>
                                <th rowspan="2">条件</th>
                                <th colspan="2">精准率=100%</th>
                                <th colspan="2">精准率&lt;100%</th>
                            </tr>
                            <tr>
                                <th>会心+会意≤100%</th>
                                <th>会心+会意&gt;100%</th>
                                <th>会心+会意≤100%</th>
                                <th>会心+会意&gt;100%</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="rate-type">会意率</td>
                                <td class="formula-cell">面板会意率</td>
                                <td class="formula-cell">面板会意率</td>
                                <td class="formula-cell">面板会意率</td>
                                <td class="formula-cell">面板会意率</td>
                            </tr>
                            <tr>
                                <td class="rate-type">会心率</td>
                                <td class="formula-cell">面板会心率</td>
                                <td class="formula-cell">1 - 面板会意率</td>
                                <td class="formula-cell">精准率 × 面板会心率</td>
                                <td class="formula-cell">精准率 × (1 - 面板会意率)</td>
                            </tr>
                            <tr>
                                <td class="rate-type">擦伤率</td>
                                <td class="formula-cell">0</td>
                                <td class="formula-cell">0</td>
                                <td class="formula-cell">(1 - 精准率) × (1 - 面板会意率)</td>
                                <td class="formula-cell">(1 - 精准率) × (1 - 面板会意率)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="data-section">
                <h3>技能倍率表</h3>
                <div class="table-container">
                    <table id="skill-rates-table">
                        <thead>
                        <tr>
                            <th>技能名称</th>
                                <th>外功倍率</th>
                                <th>固定外功</th>
                                <th>破竹倍率</th>
                                <th>固定破竹</th>
                                <th>外属倍率</th>
                                <th>Hit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 技能倍率数据将通过JavaScript动态加载 -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="data-section">
                <h3>增益效果表</h3>
                <div class="table-container">
                    <table id="buff-data-table">
                        <thead>
                            <tr>
                                <th>技能名称</th>
                                <th>通用增伤</th>
                                <th>会心增伤</th>
                                <th>外功穿透</th>
                                <th>额外会心率</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- BUFF增伤数据将通过JavaScript动态加载 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        

    </div>
    
    <script src="script.js?t=202510250330"></script>
    
    <!-- 移动端优化JavaScript -->
    <script>
        // 移动端优化 - 不影响PC端
        (function() {
            'use strict';
            
            // 检测移动端
            function isMobile() {
                return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            }
            
            // 检测浏览器类型
            function detectBrowser() {
                const ua = navigator.userAgent.toLowerCase();
                const isWeChat = /micromessenger/i.test(ua);
                const isUC = /ucbrowser/i.test(ua);
                const isSafari = /safari/i.test(ua) && !/chrome/i.test(ua);
                const isChrome = /chrome/i.test(ua) && !/edge/i.test(ua);
                const isIOS = /iphone|ipad|ipod/i.test(ua);
                const isAndroid = /android/i.test(ua);
                
                return { isWeChat, isUC, isSafari, isChrome, isIOS, isAndroid };
            }
            
            // 只在移动端执行
            if (isMobile()) {
                const browser = detectBrowser();
                
                // 添加浏览器类名
                if (browser.isWeChat) document.body.classList.add('wechat-browser');
                if (browser.isUC) document.body.classList.add('uc-browser');
                if (browser.isSafari) document.body.classList.add('ios-safari');
                if (browser.isChrome) document.body.classList.add('android-chrome');
                if (browser.isIOS) document.body.classList.add('ios-device');
                if (browser.isAndroid) document.body.classList.add('android-device');
                
                // 防止双击缩放
                let lastTouchEnd = 0;
                document.addEventListener('touchend', function(event) {
                    const now = (new Date()).getTime();
                    if (now - lastTouchEnd <= 300) {
                        event.preventDefault();
                    }
                    lastTouchEnd = now;
                }, false);
                
                // 优化触摸反馈
                const touchElements = document.querySelectorAll('button, .action-btn, .tab-button, input, select');
                touchElements.forEach(element => {
                    element.addEventListener('touchstart', function() {
                        this.style.transform = 'scale(0.95)';
                        this.style.transition = 'transform 0.1s ease';
                    });
                    
                    element.addEventListener('touchend', function() {
                        this.style.transform = 'scale(1)';
                    });
                    
                    element.addEventListener('touchcancel', function() {
                        this.style.transform = 'scale(1)';
                    });
                });
                
                // 防止输入框缩放
                const inputs = document.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    input.addEventListener('focus', function() {
                        if (window.innerWidth < 768) {
                            document.querySelector('meta[name="viewport"]').setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
                        }
                    });
                    
                    input.addEventListener('blur', function() {
                        if (window.innerWidth < 768) {
                            document.querySelector('meta[name="viewport"]').setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover');
                        }
                    });
                });
                
                // 优化滚动性能
                const scrollContainers = document.querySelectorAll('.table-container');
                scrollContainers.forEach(container => {
                    container.style.webkitOverflowScrolling = 'touch';
                    container.style.scrollBehavior = 'smooth';
                });
                
                // 处理屏幕旋转
                let orientationTimeout;
                window.addEventListener('orientationchange', function() {
                    clearTimeout(orientationTimeout);
                    orientationTimeout = setTimeout(function() {
                        window.dispatchEvent(new Event('resize'));
                    }, 100);
                });
                
                console.log('移动端优化已启用');
            }
        })();
    </script>
    </body>
</html>